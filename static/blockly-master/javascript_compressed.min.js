(function(a,t){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],t):"object"==typeof exports?module.exports=t(require("./blockly_compressed.js")):a.Blockly.JavaScript=t(a.Blockly)})(this,function(a){const t=a.internal_;var l=new t.module$exports$Blockly$Generator.Generator("JavaScript");l.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.module$exports$Blockly$utils$global.globalThis).join(",")),l.ORDER_ATOMIC=0,l.ORDER_NEW=1.1,l.ORDER_MEMBER=1.2,l.ORDER_FUNCTION_CALL=2,l.ORDER_INCREMENT=3,l.ORDER_DECREMENT=3,l.ORDER_BITWISE_NOT=4.1,l.ORDER_UNARY_PLUS=4.2,l.ORDER_UNARY_NEGATION=4.3,l.ORDER_LOGICAL_NOT=4.4,l.ORDER_TYPEOF=4.5,l.ORDER_VOID=4.6,l.ORDER_DELETE=4.7,l.ORDER_AWAIT=4.8,l.ORDER_EXPONENTIATION=5,l.ORDER_MULTIPLICATION=5.1,l.ORDER_DIVISION=5.2,l.ORDER_MODULUS=5.3,l.ORDER_SUBTRACTION=6.1,l.ORDER_ADDITION=6.2,l.ORDER_BITWISE_SHIFT=7,l.ORDER_RELATIONAL=8,l.ORDER_IN=8,l.ORDER_INSTANCEOF=8,l.ORDER_EQUALITY=9,l.ORDER_BITWISE_AND=10,l.ORDER_BITWISE_XOR=11,l.ORDER_BITWISE_OR=12,l.ORDER_LOGICAL_AND=13,l.ORDER_LOGICAL_OR=14,l.ORDER_CONDITIONAL=15,l.ORDER_ASSIGNMENT=16,l.ORDER_YIELD=17,l.ORDER_COMMA=18,l.ORDER_NONE=99,l.ORDER_OVERRIDES=[[l.ORDER_FUNCTION_CALL,l.ORDER_MEMBER],[l.ORDER_FUNCTION_CALL,l.ORDER_FUNCTION_CALL],[l.ORDER_MEMBER,l.ORDER_MEMBER],[l.ORDER_MEMBER,l.ORDER_FUNCTION_CALL],[l.ORDER_LOGICAL_NOT,l.ORDER_LOGICAL_NOT],[l.ORDER_MULTIPLICATION,l.ORDER_MULTIPLICATION],[l.ORDER_ADDITION,l.ORDER_ADDITION],[l.ORDER_LOGICAL_AND,l.ORDER_LOGICAL_AND],[l.ORDER_LOGICAL_OR,l.ORDER_LOGICAL_OR]],l.isInitialized=!1,l.init=function(a){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.module$exports$Blockly$Names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(a.getVariableMap()),this.nameDB_.populateVariables(a),this.nameDB_.populateProcedures(a);for(var l=[],e=(0,t.module$exports$Blockly$Variables.allDeveloperVariables)(a),r=0;r<e.length;r++)l.push(this.nameDB_.getName(e[r],t.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE));for(a=(0,t.module$exports$Blockly$Variables.allUsedVarModels)(a),e=0;e<a.length;e++)l.push(this.nameDB_.getName(a[e].getId(),t.module$exports$Blockly$Names.NameType.VARIABLE));l.length&&(this.definitions_.variables="var "+l.join(", ")+";"),this.isInitialized=!0},l.finish=function(a){var l=(0,t.module$exports$Blockly$utils$object.values)(this.definitions_);return a=Object.getPrototypeOf(this).finish.call(this,a),this.isInitialized=!1,this.nameDB_.reset(),l.join("\n\n")+"\n\n\n"+a},l.scrubNakedValue=function(a){return a+";\n"},l.quote_=function(a){return a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"),"'"+a+"'"},l.multiline_quote_=function(a){return a.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},l.scrub_=function(a,l,e){var r="";if(!a.outputConnection||!a.outputConnection.targetConnection){var c=a.getCommentText();c&&(c=(0,t.module$exports$Blockly$utils$string.wrap)(c,this.COMMENT_WRAP-3),r+=this.prefixLines(c+"\n","// "));for(var o=0;o<a.inputList.length;o++)a.inputList[o].type===t.module$exports$Blockly$inputTypes.inputTypes.VALUE&&(c=a.inputList[o].connection.targetBlock())&&(c=this.allNestedComments(c))&&(r+=this.prefixLines(c,"// "))}return a=a.nextConnection&&a.nextConnection.targetBlock(),e=e?"":this.blockToCode(a),r+l+e},l.getAdjusted=function(a,l,e,r,c){e=e||0,c=c||this.ORDER_NONE,a.workspace.options.oneBasedIndex&&e--;var o=a.workspace.options.oneBasedIndex?"1":"0",i=c;if(0<e)var n=i=this.ORDER_ADDITION;else 0>e?n=i=this.ORDER_SUBTRACTION:r&&(n=i=this.ORDER_UNARY_NEGATION);return a=this.valueToCode(a,l,i)||o,(0,t.module$exports$Blockly$utils$string.isNumber)(a)?(a=Number(a)+e,r&&(a=-a)):(0<e?a=a+" + "+e:0>e&&(a=a+" - "+-e),r&&(a=e?"-("+a+")":"-"+a),n=Math.floor(n),c=Math.floor(c),n&&c>=n&&(a="("+a+")")),a},t.Blockly.JavaScript=l;t.Blockly.JavaScript.variables_get=function(a){return[t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),t.module$exports$Blockly$Names.NameType.VARIABLE),t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.variables_set=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";return t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),t.module$exports$Blockly$Names.NameType.VARIABLE)+" = "+l+";\n"};t.Blockly.JavaScript.variables_get_dynamic=t.Blockly.JavaScript.variables_get,t.Blockly.JavaScript.variables_set_dynamic=t.Blockly.JavaScript.variables_set;var e=/^\s*'([^']|\\')*'\s*$/,r=function(a){return e.test(a)?[a,t.Blockly.JavaScript.ORDER_ATOMIC]:["String("+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},c=function(a,t,l){return"FIRST"===t?"0":"FROM_END"===t?a+".length - 1 - "+l:"LAST"===t?a+".length - 1":l};t.Blockly.JavaScript.text=function(a){return[t.Blockly.JavaScript.quote_(a.getFieldValue("TEXT")),t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.text_multiline=function(a){a=t.Blockly.JavaScript.multiline_quote_(a.getFieldValue("TEXT"));var l=-1!==a.indexOf("+")?t.Blockly.JavaScript.ORDER_ADDITION:t.Blockly.JavaScript.ORDER_ATOMIC;return[a,l]},t.Blockly.JavaScript.text_join=function(a){switch(a.itemCount_){case 0:return["''",t.Blockly.JavaScript.ORDER_ATOMIC];case 1:return a=t.Blockly.JavaScript.valueToCode(a,"ADD0",t.Blockly.JavaScript.ORDER_NONE)||"''",r(a);case 2:var l=t.Blockly.JavaScript.valueToCode(a,"ADD0",t.Blockly.JavaScript.ORDER_NONE)||"''";return a=t.Blockly.JavaScript.valueToCode(a,"ADD1",t.Blockly.JavaScript.ORDER_NONE)||"''",[r(l)[0]+" + "+r(a)[0],t.Blockly.JavaScript.ORDER_ADDITION];default:l=Array(a.itemCount_);for(var e=0;e<a.itemCount_;e++)l[e]=t.Blockly.JavaScript.valueToCode(a,"ADD"+e,t.Blockly.JavaScript.ORDER_NONE)||"''";return["["+l.join(",")+"].join('')",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]}},t.Blockly.JavaScript.text_append=function(a){var l=t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),t.module$exports$Blockly$Names.NameType.VARIABLE);return a=t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_NONE)||"''",l+" += "+r(a)[0]+";\n"},t.Blockly.JavaScript.text_length=function(a){return[(t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_MEMBER)||"''")+".length",t.Blockly.JavaScript.ORDER_MEMBER]},t.Blockly.JavaScript.text_isEmpty=function(a){return["!"+(t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_MEMBER)||"''")+".length",t.Blockly.JavaScript.ORDER_LOGICAL_NOT]},t.Blockly.JavaScript.text_indexOf=function(a){var l="FIRST"===a.getFieldValue("END")?"indexOf":"lastIndexOf",e=t.Blockly.JavaScript.valueToCode(a,"FIND",t.Blockly.JavaScript.ORDER_NONE)||"''";return l=(t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_MEMBER)||"''")+"."+l+"("+e+")",a.workspace.options.oneBasedIndex?[l+" + 1",t.Blockly.JavaScript.ORDER_ADDITION]:[l,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_charAt=function(a){var l=a.getFieldValue("WHERE")||"FROM_START",e=t.Blockly.JavaScript.valueToCode(a,"VALUE","RANDOM"===l?t.Blockly.JavaScript.ORDER_NONE:t.Blockly.JavaScript.ORDER_MEMBER)||"''";switch(l){case"FIRST":return[e+".charAt(0)",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[e+".slice(-1)",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return a=t.Blockly.JavaScript.getAdjusted(a,"AT"),[e+".charAt("+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return a=t.Blockly.JavaScript.getAdjusted(a,"AT",1,!0),[e+".slice("+a+").charAt(0)",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.Blockly.JavaScript.provideFunction_("textRandomLetter",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+e+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.Blockly.JavaScript.text_getSubstring=function(a){var l=a.getFieldValue("WHERE1"),e=a.getFieldValue("WHERE2"),r="FROM_END"!==l&&"LAST"!==l&&"FROM_END"!==e&&"LAST"!==e,o=t.Blockly.JavaScript.valueToCode(a,"STRING",r?t.Blockly.JavaScript.ORDER_MEMBER:t.Blockly.JavaScript.ORDER_NONE)||"''";if("FIRST"===l&&"LAST"===e)return[o,t.Blockly.JavaScript.ORDER_NONE];if(o.match(/^'?\w+'?$/)||r){switch(l){case"FROM_START":l=t.Blockly.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":l=t.Blockly.JavaScript.getAdjusted(a,"AT1",1,!1,t.Blockly.JavaScript.ORDER_SUBTRACTION),l=o+".length - "+l;break;case"FIRST":l="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(e){case"FROM_START":e=t.Blockly.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":e=t.Blockly.JavaScript.getAdjusted(a,"AT2",0,!1,t.Blockly.JavaScript.ORDER_SUBTRACTION),e=o+".length - "+e;break;case"LAST":e=o+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=o+".slice("+l+", "+e+")"}else{r=t.Blockly.JavaScript.getAdjusted(a,"AT1"),a=t.Blockly.JavaScript.getAdjusted(a,"AT2");var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.Blockly.JavaScript.provideFunction_("subsequence"+i[l]+i[e],["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"===l||"FROM_START"===l?", at1":"")+("FROM_END"===e||"FROM_START"===e?", at2":"")+") {","  var start = "+c("sequence",l,"at1")+";","  var end = "+c("sequence",e,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"===l||"FROM_START"===l?", "+r:"")+("FROM_END"===e||"FROM_START"===e?", "+a:"")+")"}return[o,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_changeCase=function(a){var l={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")];return a=t.Blockly.JavaScript.valueToCode(a,"TEXT",l?t.Blockly.JavaScript.ORDER_MEMBER:t.Blockly.JavaScript.ORDER_NONE)||"''",[l?a+l:t.Blockly.JavaScript.provideFunction_("textToTitleCase",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_trim=function(a){var l={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[a.getFieldValue("MODE")];return[(t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_MEMBER)||"''")+l,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_print=function(a){return"window.alert("+(t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_NONE)||"''")+");\n"},t.Blockly.JavaScript.text_prompt_ext=function(a){var l="window.prompt("+(a.getField("TEXT")?t.Blockly.JavaScript.quote_(a.getFieldValue("TEXT")):t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"===a.getFieldValue("TYPE")&&(l="Number("+l+")"),[l,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_prompt=t.Blockly.JavaScript.text_prompt_ext,t.Blockly.JavaScript.text_count=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_NONE)||"''";return a=t.Blockly.JavaScript.valueToCode(a,"SUB",t.Blockly.JavaScript.ORDER_NONE)||"''",[t.Blockly.JavaScript.provideFunction_("textCount",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+l+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_replace=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_NONE)||"''",e=t.Blockly.JavaScript.valueToCode(a,"FROM",t.Blockly.JavaScript.ORDER_NONE)||"''";return a=t.Blockly.JavaScript.valueToCode(a,"TO",t.Blockly.JavaScript.ORDER_NONE)||"''",[t.Blockly.JavaScript.provideFunction_("textReplace",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+l+", "+e+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.text_reverse=function(a){return[(t.Blockly.JavaScript.valueToCode(a,"TEXT",t.Blockly.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]};t.Blockly.JavaScript.procedures_defreturn=function(a){var l=t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("NAME"),t.module$exports$Blockly$Names.NameType.PROCEDURE),e="";t.Blockly.JavaScript.STATEMENT_PREFIX&&(e+=t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_PREFIX,a)),t.Blockly.JavaScript.STATEMENT_SUFFIX&&(e+=t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_SUFFIX,a)),e&&(e=t.Blockly.JavaScript.prefixLines(e,t.Blockly.JavaScript.INDENT));var r="";t.Blockly.JavaScript.INFINITE_LOOP_TRAP&&(r=t.Blockly.JavaScript.prefixLines(t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.INFINITE_LOOP_TRAP,a),t.Blockly.JavaScript.INDENT));var c=t.Blockly.JavaScript.statementToCode(a,"STACK"),o=t.Blockly.JavaScript.valueToCode(a,"RETURN",t.Blockly.JavaScript.ORDER_NONE)||"",i="";c&&o&&(i=e),o&&(o=t.Blockly.JavaScript.INDENT+"return "+o+";\n");for(var n=[],v=a.getVars(),R=0;R<v.length;R++)n[R]=t.Blockly.JavaScript.nameDB_.getName(v[R],t.module$exports$Blockly$Names.NameType.VARIABLE);return e="function "+l+"("+n.join(", ")+") {\n"+e+r+c+i+o+"}",e=t.Blockly.JavaScript.scrub_(a,e),t.Blockly.JavaScript.definitions_["%"+l]=e,null},t.Blockly.JavaScript.procedures_defnoreturn=t.Blockly.JavaScript.procedures_defreturn,t.Blockly.JavaScript.procedures_callreturn=function(a){for(var l=t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("NAME"),t.module$exports$Blockly$Names.NameType.PROCEDURE),e=[],r=a.getVars(),c=0;c<r.length;c++)e[c]=t.Blockly.JavaScript.valueToCode(a,"ARG"+c,t.Blockly.JavaScript.ORDER_NONE)||"null";return[l+"("+e.join(", ")+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.procedures_callnoreturn=function(a){return t.Blockly.JavaScript.procedures_callreturn(a)[0]+";\n"},t.Blockly.JavaScript.procedures_ifreturn=function(a){var l="if ("+(t.Blockly.JavaScript.valueToCode(a,"CONDITION",t.Blockly.JavaScript.ORDER_NONE)||"false")+") {\n";return t.Blockly.JavaScript.STATEMENT_SUFFIX&&(l+=t.Blockly.JavaScript.prefixLines(t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_SUFFIX,a),t.Blockly.JavaScript.INDENT)),a.hasReturnValue_?(a=t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_NONE)||"null",l+=t.Blockly.JavaScript.INDENT+"return "+a+";\n"):l+=t.Blockly.JavaScript.INDENT+"return;\n",l+"}\n"};t.Blockly.JavaScript.math_number=function(a){return a=Number(a.getFieldValue("NUM")),[a,0<=a?t.Blockly.JavaScript.ORDER_ATOMIC:t.Blockly.JavaScript.ORDER_UNARY_NEGATION]},t.Blockly.JavaScript.math_arithmetic=function(a){var l={ADD:[" + ",t.Blockly.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.Blockly.JavaScript.ORDER_DIVISION],POWER:[null,t.Blockly.JavaScript.ORDER_NONE]}[a.getFieldValue("OP")],e=l[0];l=l[1];var r=t.Blockly.JavaScript.valueToCode(a,"A",l)||"0";return a=t.Blockly.JavaScript.valueToCode(a,"B",l)||"0",e?[r+e+a,l]:["Math.pow("+r+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.math_single=function(a){var l=a.getFieldValue("OP");if("NEG"===l)return a=t.Blockly.JavaScript.valueToCode(a,"NUM",t.Blockly.JavaScript.ORDER_UNARY_NEGATION)||"0","-"===a[0]&&(a=" "+a),["-"+a,t.Blockly.JavaScript.ORDER_UNARY_NEGATION];switch(a="SIN"===l||"COS"===l||"TAN"===l?t.Blockly.JavaScript.valueToCode(a,"NUM",t.Blockly.JavaScript.ORDER_DIVISION)||"0":t.Blockly.JavaScript.valueToCode(a,"NUM",t.Blockly.JavaScript.ORDER_NONE)||"0",l){case"ABS":var e="Math.abs("+a+")";break;case"ROOT":e="Math.sqrt("+a+")";break;case"LN":e="Math.log("+a+")";break;case"EXP":e="Math.exp("+a+")";break;case"POW10":e="Math.pow(10,"+a+")";break;case"ROUND":e="Math.round("+a+")";break;case"ROUNDUP":e="Math.ceil("+a+")";break;case"ROUNDDOWN":e="Math.floor("+a+")";break;case"SIN":e="Math.sin("+a+" / 180 * Math.PI)";break;case"COS":e="Math.cos("+a+" / 180 * Math.PI)";break;case"TAN":e="Math.tan("+a+" / 180 * Math.PI)"}if(e)return[e,t.Blockly.JavaScript.ORDER_FUNCTION_CALL];switch(l){case"LOG10":e="Math.log("+a+") / Math.log(10)";break;case"ASIN":e="Math.asin("+a+") / Math.PI * 180";break;case"ACOS":e="Math.acos("+a+") / Math.PI * 180";break;case"ATAN":e="Math.atan("+a+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+l)}return[e,t.Blockly.JavaScript.ORDER_DIVISION]},t.Blockly.JavaScript.math_constant=function(a){return{PI:["Math.PI",t.Blockly.JavaScript.ORDER_MEMBER],E:["Math.E",t.Blockly.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.Blockly.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.Blockly.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.Blockly.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.Blockly.JavaScript.ORDER_ATOMIC]}[a.getFieldValue("CONSTANT")]},t.Blockly.JavaScript.math_number_property=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"NUMBER_TO_CHECK",t.Blockly.JavaScript.ORDER_MODULUS)||"0",e=a.getFieldValue("PROPERTY");if("PRIME"===e)return[t.Blockly.JavaScript.provideFunction_("mathIsPrime",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) === 0 || n % (x + 1) === 0) {","      return false;","    }","  }","  return true;","}"])+"("+l+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];switch(e){case"EVEN":var r=l+" % 2 === 0";break;case"ODD":r=l+" % 2 === 1";break;case"WHOLE":r=l+" % 1 === 0";break;case"POSITIVE":r=l+" > 0";break;case"NEGATIVE":r=l+" < 0";break;case"DIVISIBLE_BY":a=t.Blockly.JavaScript.valueToCode(a,"DIVISOR",t.Blockly.JavaScript.ORDER_MODULUS)||"0",r=l+" % "+a+" === 0"}return[r,t.Blockly.JavaScript.ORDER_EQUALITY]},t.Blockly.JavaScript.math_change=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"DELTA",t.Blockly.JavaScript.ORDER_ADDITION)||"0";return a=t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),t.module$exports$Blockly$Names.NameType.VARIABLE),a+" = (typeof "+a+" === 'number' ? "+a+" : 0) + "+l+";\n"},t.Blockly.JavaScript.math_round=t.Blockly.JavaScript.math_single,t.Blockly.JavaScript.math_trig=t.Blockly.JavaScript.math_single,t.Blockly.JavaScript.math_on_list=function(a){var l=a.getFieldValue("OP");switch(l){case"SUM":a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_MEMBER)||"[]",a+=".reduce(function(x, y) {return x + y;})";break;case"MIN":a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a="Math.min.apply(null, "+a+")";break;case"MAX":a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a="Math.max.apply(null, "+a+")";break;case"AVERAGE":l=t.Blockly.JavaScript.provideFunction_("mathMean",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]),a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a=l+"("+a+")";break;case"MEDIAN":l=t.Blockly.JavaScript.provideFunction_("mathMedian",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x === 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 === 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]),a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a=l+"("+a+")";break;case"MODE":l=t.Blockly.JavaScript.provideFunction_("mathModes",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] === maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]),a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a=l+"("+a+")";break;case"STD_DEV":l=t.Blockly.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]),a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a=l+"("+a+")";break;case"RANDOM":l=t.Blockly.JavaScript.provideFunction_("mathRandomList",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]),a=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_NONE)||"[]",a=l+"("+a+")";break;default:throw Error("Unknown operator: "+l)}return[a,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.math_modulo=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"DIVIDEND",t.Blockly.JavaScript.ORDER_MODULUS)||"0";return a=t.Blockly.JavaScript.valueToCode(a,"DIVISOR",t.Blockly.JavaScript.ORDER_MODULUS)||"0",[l+" % "+a,t.Blockly.JavaScript.ORDER_MODULUS]},t.Blockly.JavaScript.math_constrain=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_NONE)||"0",e=t.Blockly.JavaScript.valueToCode(a,"LOW",t.Blockly.JavaScript.ORDER_NONE)||"0";return a=t.Blockly.JavaScript.valueToCode(a,"HIGH",t.Blockly.JavaScript.ORDER_NONE)||"Infinity",["Math.min(Math.max("+l+", "+e+"), "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.math_random_int=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"FROM",t.Blockly.JavaScript.ORDER_NONE)||"0";return a=t.Blockly.JavaScript.valueToCode(a,"TO",t.Blockly.JavaScript.ORDER_NONE)||"0",[t.Blockly.JavaScript.provideFunction_("mathRandomInt",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+l+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.math_random_float=function(a){return["Math.random()",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.math_atan2=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"X",t.Blockly.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.Blockly.JavaScript.valueToCode(a,"Y",t.Blockly.JavaScript.ORDER_NONE)||"0")+", "+l+") / Math.PI * 180",t.Blockly.JavaScript.ORDER_DIVISION]};t.Blockly.JavaScript.controls_repeat_ext=function(a){var l=a.getField("TIMES")?String(Number(a.getFieldValue("TIMES"))):t.Blockly.JavaScript.valueToCode(a,"TIMES",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",e=t.Blockly.JavaScript.statementToCode(a,"DO");e=t.Blockly.JavaScript.addLoopTrap(e,a),a="";var r=t.Blockly.JavaScript.nameDB_.getDistinctName("count",t.module$exports$Blockly$Names.NameType.VARIABLE),c=l;return l.match(/^\w+$/)||(0,t.module$exports$Blockly$utils$string.isNumber)(l)||(c=t.Blockly.JavaScript.nameDB_.getDistinctName("repeat_end",t.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+c+" = "+l+";\n"),a+"for (var "+r+" = 0; "+r+" < "+c+"; "+r+"++) {\n"+e+"}\n"},t.Blockly.JavaScript.controls_repeat=t.Blockly.JavaScript.controls_repeat_ext,t.Blockly.JavaScript.controls_whileUntil=function(a){var l="UNTIL"===a.getFieldValue("MODE"),e=t.Blockly.JavaScript.valueToCode(a,"BOOL",l?t.Blockly.JavaScript.ORDER_LOGICAL_NOT:t.Blockly.JavaScript.ORDER_NONE)||"false",r=t.Blockly.JavaScript.statementToCode(a,"DO");return r=t.Blockly.JavaScript.addLoopTrap(r,a),l&&(e="!"+e),"while ("+e+") {\n"+r+"}\n"},t.Blockly.JavaScript.controls_for=function(a){var l=t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),t.module$exports$Blockly$Names.NameType.VARIABLE),e=t.Blockly.JavaScript.valueToCode(a,"FROM",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",r=t.Blockly.JavaScript.valueToCode(a,"TO",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.Blockly.JavaScript.valueToCode(a,"BY",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"1",o=t.Blockly.JavaScript.statementToCode(a,"DO");if(o=t.Blockly.JavaScript.addLoopTrap(o,a),(0,t.module$exports$Blockly$utils$string.isNumber)(e)&&(0,t.module$exports$Blockly$utils$string.isNumber)(r)&&(0,t.module$exports$Blockly$utils$string.isNumber)(c)){var i=Number(e)<=Number(r);a="for ("+l+" = "+e+"; "+l+(i?" <= ":" >= ")+r+"; "+l,l=Math.abs(Number(c)),a=(1===l?a+(i?"++":"--"):a+(i?" += ":" -= ")+l)+") {\n"+o+"}\n"}else a="",i=e,e.match(/^\w+$/)||(0,t.module$exports$Blockly$utils$string.isNumber)(e)||(i=t.Blockly.JavaScript.nameDB_.getDistinctName(l+"_start",t.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+i+" = "+e+";\n"),e=r,r.match(/^\w+$/)||(0,t.module$exports$Blockly$utils$string.isNumber)(r)||(e=t.Blockly.JavaScript.nameDB_.getDistinctName(l+"_end",t.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+e+" = "+r+";\n"),r=t.Blockly.JavaScript.nameDB_.getDistinctName(l+"_inc",t.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+r+" = ",a=(0,t.module$exports$Blockly$utils$string.isNumber)(c)?a+(Math.abs(c)+";\n"):a+"Math.abs("+c+");\n",a=a+"if ("+i+" > "+e+") {\n"+(t.Blockly.JavaScript.INDENT+r)+" = -"+r+";\n",a+="}\n",a+="for ("+l+" = "+i+"; "+r+" >= 0 ? "+l+" <= "+e+" : "+l+" >= "+e+"; "+l+" += "+r+") {\n"+o+"}\n";return a},t.Blockly.JavaScript.controls_forEach=function(a){var l=t.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),t.module$exports$Blockly$Names.NameType.VARIABLE),e=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"[]",r=t.Blockly.JavaScript.statementToCode(a,"DO");r=t.Blockly.JavaScript.addLoopTrap(r,a),a="";var c=e;return e.match(/^\w+$/)||(c=t.Blockly.JavaScript.nameDB_.getDistinctName(l+"_list",t.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+c+" = "+e+";\n"),e=t.Blockly.JavaScript.nameDB_.getDistinctName(l+"_index",t.module$exports$Blockly$Names.NameType.VARIABLE),r=t.Blockly.JavaScript.INDENT+l+" = "+c+"["+e+"];\n"+r,a+"for (var "+e+" in "+c+") {\n"+r+"}\n"},t.Blockly.JavaScript.controls_flow_statements=function(a){var l="";if(t.Blockly.JavaScript.STATEMENT_PREFIX&&(l+=t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_PREFIX,a)),t.Blockly.JavaScript.STATEMENT_SUFFIX&&(l+=t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_SUFFIX,a)),t.Blockly.JavaScript.STATEMENT_PREFIX){var e=a.getSurroundLoop();e&&!e.suppressPrefixSuffix&&(l+=t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_PREFIX,e))}switch(a.getFieldValue("FLOW")){case"BREAK":return l+"break;\n";case"CONTINUE":return l+"continue;\n"}throw Error("Unknown flow statement.")};t.Blockly.JavaScript.controls_if=function(a){var l=0,e="";t.Blockly.JavaScript.STATEMENT_PREFIX&&(e+=t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_PREFIX,a));do{var r=t.Blockly.JavaScript.valueToCode(a,"IF"+l,t.Blockly.JavaScript.ORDER_NONE)||"false",c=t.Blockly.JavaScript.statementToCode(a,"DO"+l);t.Blockly.JavaScript.STATEMENT_SUFFIX&&(c=t.Blockly.JavaScript.prefixLines(t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_SUFFIX,a),t.Blockly.JavaScript.INDENT)+c),e+=(0<l?" else ":"")+"if ("+r+") {\n"+c+"}",l++}while(a.getInput("IF"+l));return(a.getInput("ELSE")||t.Blockly.JavaScript.STATEMENT_SUFFIX)&&(l=t.Blockly.JavaScript.statementToCode(a,"ELSE"),t.Blockly.JavaScript.STATEMENT_SUFFIX&&(l=t.Blockly.JavaScript.prefixLines(t.Blockly.JavaScript.injectId(t.Blockly.JavaScript.STATEMENT_SUFFIX,a),t.Blockly.JavaScript.INDENT)+l),e+=" else {\n"+l+"}"),e+"\n"},t.Blockly.JavaScript.controls_ifelse=t.Blockly.JavaScript.controls_if,t.Blockly.JavaScript.logic_compare=function(a){var l={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],e="=="===l||"!="===l?t.Blockly.JavaScript.ORDER_EQUALITY:t.Blockly.JavaScript.ORDER_RELATIONAL,r=t.Blockly.JavaScript.valueToCode(a,"A",e)||"0";return a=t.Blockly.JavaScript.valueToCode(a,"B",e)||"0",[r+" "+l+" "+a,e]},t.Blockly.JavaScript.logic_operation=function(a){var l="AND"===a.getFieldValue("OP")?"&&":"||",e="&&"===l?t.Blockly.JavaScript.ORDER_LOGICAL_AND:t.Blockly.JavaScript.ORDER_LOGICAL_OR,r=t.Blockly.JavaScript.valueToCode(a,"A",e);if(a=t.Blockly.JavaScript.valueToCode(a,"B",e),r||a){var c="&&"===l?"true":"false";r||(r=c),a||(a=c)}else a=r="false";return[r+" "+l+" "+a,e]},t.Blockly.JavaScript.logic_negate=function(a){var l=t.Blockly.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.Blockly.JavaScript.valueToCode(a,"BOOL",l)||"true"),l]},t.Blockly.JavaScript.logic_boolean=function(a){return["TRUE"===a.getFieldValue("BOOL")?"true":"false",t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.logic_null=function(a){return["null",t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.logic_ternary=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"IF",t.Blockly.JavaScript.ORDER_CONDITIONAL)||"false",e=t.Blockly.JavaScript.valueToCode(a,"THEN",t.Blockly.JavaScript.ORDER_CONDITIONAL)||"null";return a=t.Blockly.JavaScript.valueToCode(a,"ELSE",t.Blockly.JavaScript.ORDER_CONDITIONAL)||"null",[l+" ? "+e+" : "+a,t.Blockly.JavaScript.ORDER_CONDITIONAL]};t.Blockly.JavaScript.lists_create_empty=function(a){return["[]",t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.lists_create_with=function(a){for(var l=Array(a.itemCount_),e=0;e<a.itemCount_;e++)l[e]=t.Blockly.JavaScript.valueToCode(a,"ADD"+e,t.Blockly.JavaScript.ORDER_NONE)||"null";return["["+l.join(", ")+"]",t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.lists_repeat=function(a){var l=t.Blockly.JavaScript.provideFunction_("listsRepeat",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"]),e=t.Blockly.JavaScript.valueToCode(a,"ITEM",t.Blockly.JavaScript.ORDER_NONE)||"null";return a=t.Blockly.JavaScript.valueToCode(a,"NUM",t.Blockly.JavaScript.ORDER_NONE)||"0",[l+"("+e+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.lists_length=function(a){return[(t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",t.Blockly.JavaScript.ORDER_MEMBER]},t.Blockly.JavaScript.lists_isEmpty=function(a){
return["!"+(t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",t.Blockly.JavaScript.ORDER_LOGICAL_NOT]},t.Blockly.JavaScript.lists_indexOf=function(a){var l="FIRST"===a.getFieldValue("END")?"indexOf":"lastIndexOf",e=t.Blockly.JavaScript.valueToCode(a,"FIND",t.Blockly.JavaScript.ORDER_NONE)||"''";return l=(t.Blockly.JavaScript.valueToCode(a,"VALUE",t.Blockly.JavaScript.ORDER_MEMBER)||"[]")+"."+l+"("+e+")",a.workspace.options.oneBasedIndex?[l+" + 1",t.Blockly.JavaScript.ORDER_ADDITION]:[l,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.lists_getIndex=function(a){var l=a.getFieldValue("MODE")||"GET",e=a.getFieldValue("WHERE")||"FROM_START",r=t.Blockly.JavaScript.valueToCode(a,"VALUE","RANDOM"===e?t.Blockly.JavaScript.ORDER_NONE:t.Blockly.JavaScript.ORDER_MEMBER)||"[]";switch(e){case"FIRST":if("GET"===l)return[r+"[0]",t.Blockly.JavaScript.ORDER_MEMBER];if("GET_REMOVE"===l)return[r+".shift()",t.Blockly.JavaScript.ORDER_MEMBER];if("REMOVE"===l)return r+".shift();\n";break;case"LAST":if("GET"===l)return[r+".slice(-1)[0]",t.Blockly.JavaScript.ORDER_MEMBER];if("GET_REMOVE"===l)return[r+".pop()",t.Blockly.JavaScript.ORDER_MEMBER];if("REMOVE"===l)return r+".pop();\n";break;case"FROM_START":if(a=t.Blockly.JavaScript.getAdjusted(a,"AT"),"GET"===l)return[r+"["+a+"]",t.Blockly.JavaScript.ORDER_MEMBER];if("GET_REMOVE"===l)return[r+".splice("+a+", 1)[0]",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"===l)return r+".splice("+a+", 1);\n";break;case"FROM_END":if(a=t.Blockly.JavaScript.getAdjusted(a,"AT",1,!0),"GET"===l)return[r+".slice("+a+")[0]",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"===l)return[r+".splice("+a+", 1)[0]",t.Blockly.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"===l)return r+".splice("+a+", 1);";break;case"RANDOM":if(r=t.Blockly.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+r+", "+("GET"!==l)+")","GET"===l||"GET_REMOVE"===l)return[r,t.Blockly.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"===l)return r+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.Blockly.JavaScript.lists_setIndex=function(a){function l(){if(e.match(/^\w+$/))return"";var a=t.Blockly.JavaScript.nameDB_.getDistinctName("tmpList",t.module$exports$Blockly$Names.NameType.VARIABLE),l="var "+a+" = "+e+";\n";return e=a,l}var e=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_MEMBER)||"[]",r=a.getFieldValue("MODE")||"GET",c=a.getFieldValue("WHERE")||"FROM_START",o=t.Blockly.JavaScript.valueToCode(a,"TO",t.Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";switch(c){case"FIRST":if("SET"===r)return e+"[0] = "+o+";\n";if("INSERT"===r)return e+".unshift("+o+");\n";break;case"LAST":if("SET"===r)return l()+(e+"[")+e+".length - 1] = "+o+";\n";if("INSERT"===r)return e+".push("+o+");\n";break;case"FROM_START":if(a=t.Blockly.JavaScript.getAdjusted(a,"AT"),"SET"===r)return e+"["+a+"] = "+o+";\n";if("INSERT"===r)return e+".splice("+a+", 0, "+o+");\n";break;case"FROM_END":if(a=t.Blockly.JavaScript.getAdjusted(a,"AT",1,!1,t.Blockly.JavaScript.ORDER_SUBTRACTION),c=l(),"SET"===r)return c+(e+"[")+e+".length - "+a+"] = "+o+";\n";if("INSERT"===r)return c+(e+".splice(")+e+".length - "+a+", 0, "+o+");\n";break;case"RANDOM":if(a=l(),c=t.Blockly.JavaScript.nameDB_.getDistinctName("tmpX",t.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+c+" = Math.floor(Math.random() * "+e+".length);\n","SET"===r)return a+(e+"[")+c+"] = "+o+";\n";if("INSERT"===r)return a+(e+".splice(")+c+", 0, "+o+");\n"}throw Error("Unhandled combination (lists_setIndex).")};var o=function(a,t,l){return"FIRST"===t?"0":"FROM_END"===t?a+".length - 1 - "+l:"LAST"===t?a+".length - 1":l};t.Blockly.JavaScript.lists_getSublist=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_MEMBER)||"[]",e=a.getFieldValue("WHERE1"),r=a.getFieldValue("WHERE2");if("FIRST"===e&&"LAST"===r)l+=".slice(0)";else if(l.match(/^\w+$/)||"FROM_END"!==e&&"FROM_START"===r){switch(e){case"FROM_START":e=t.Blockly.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":e=t.Blockly.JavaScript.getAdjusted(a,"AT1",1,!1,t.Blockly.JavaScript.ORDER_SUBTRACTION),e=l+".length - "+e;break;case"FIRST":e="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(r){case"FROM_START":r=t.Blockly.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":r=t.Blockly.JavaScript.getAdjusted(a,"AT2",0,!1,t.Blockly.JavaScript.ORDER_SUBTRACTION),r=l+".length - "+r;break;case"LAST":r=l+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}l=l+".slice("+e+", "+r+")"}else{var c=t.Blockly.JavaScript.getAdjusted(a,"AT1");a=t.Blockly.JavaScript.getAdjusted(a,"AT2");var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};l=t.Blockly.JavaScript.provideFunction_("subsequence"+i[e]+i[r],["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"===e||"FROM_START"===e?", at1":"")+("FROM_END"===r||"FROM_START"===r?", at2":"")+") {",o("sequence",e,"at1")+";","  var end = "+o("sequence",r,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+l+("FROM_END"===e||"FROM_START"===e?", "+c:"")+("FROM_END"===r||"FROM_START"===r?", "+a:"")+")"}return[l,t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.lists_sort=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]",e="1"===a.getFieldValue("DIRECTION")?1:-1;a=a.getFieldValue("TYPE");var r=t.Blockly.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"]);return[l+".slice().sort("+r+'("'+a+'", '+e+"))",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.lists_split=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"INPUT",t.Blockly.JavaScript.ORDER_MEMBER),e=t.Blockly.JavaScript.valueToCode(a,"DELIM",t.Blockly.JavaScript.ORDER_NONE)||"''";if(a=a.getFieldValue("MODE"),"SPLIT"===a)l||(l="''"),a="split";else{if("JOIN"!==a)throw Error("Unknown mode: "+a);l||(l="[]"),a="join"}return[l+"."+a+"("+e+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.lists_reverse=function(a){return[(t.Blockly.JavaScript.valueToCode(a,"LIST",t.Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]};t.Blockly.JavaScript.colour_picker=function(a){return[t.Blockly.JavaScript.quote_(a.getFieldValue("COLOUR")),t.Blockly.JavaScript.ORDER_ATOMIC]},t.Blockly.JavaScript.colour_random=function(a){return[t.Blockly.JavaScript.provideFunction_("colourRandom",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.colour_rgb=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"RED",t.Blockly.JavaScript.ORDER_NONE)||0,e=t.Blockly.JavaScript.valueToCode(a,"GREEN",t.Blockly.JavaScript.ORDER_NONE)||0;return a=t.Blockly.JavaScript.valueToCode(a,"BLUE",t.Blockly.JavaScript.ORDER_NONE)||0,[t.Blockly.JavaScript.provideFunction_("colourRgb",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+l+", "+e+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]},t.Blockly.JavaScript.colour_blend=function(a){var l=t.Blockly.JavaScript.valueToCode(a,"COLOUR1",t.Blockly.JavaScript.ORDER_NONE)||"'#000000'",e=t.Blockly.JavaScript.valueToCode(a,"COLOUR2",t.Blockly.JavaScript.ORDER_NONE)||"'#000000'";return a=t.Blockly.JavaScript.valueToCode(a,"RATIO",t.Blockly.JavaScript.ORDER_NONE)||.5,[t.Blockly.JavaScript.provideFunction_("colourBlend",["function "+t.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+l+", "+e+", "+a+")",t.Blockly.JavaScript.ORDER_FUNCTION_CALL]};return t.Blockly.JavaScript});